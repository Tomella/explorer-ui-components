!function(e){"use strict";e.module("explorer.assets",["explorer.projects"]).factory("assetsService",["$log","$http","$q","projectsService","$timeout",function(t,n,r,i,o){function a(e){e="Explorer",t.debug(l+encodeURIComponent(e)),n.get(l+e+"?t="+u,{cache:!0}).success(function(e){s=e,c.forEach(function(e){e.resolve(s)})})}var s,c=[],l="service/asset/assets/",u=Date.now();return i.getCurrentProject().then(a),{getAsset:function(e){return s[e]},getAssets:function(){var e;return s?r.when(s):(e=r.defer(),c.push(e),e.promise)},getReferenceFeatureClasses:function(){var t=r.defer();return this.getAssets().then(function(n){var r=[];e.forEach(n,function(e,t){"REFERENCE_FEATURE_CLASS"==e.assetType&&this.push(e)},r),t.resolve(r)}),t.promise},getResourceKey:function(e){return e.assetId},getResource:function(e){return this.getAsset(e)}}}])}(angular),function(e){"use strict";e.module("explorer.asynch",[]).provider("asynch",function(){function t(t){var n=[];return e.forEach(t,function(e,t){n.push(t+"="+encodeURIComponent(e))}),n.join("&")}var n="process/initiateJob",r="process/checkStatus",i=9e3,o=3e3,a="slow",s={},c=0,l=0,u=null,d=null,p={};this.url=function(e){n=e},this.statusUrl=function(e){r=e},this.broker=function(e){d=e},this.idlePoll=function(e){i=e},this.waitingPoll=function(e){o=e},this.$get=["$log","$http","$q","$timeout",function(f,g,m,h){function v(){if(g({url:r,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t(p)}).then(function(e){var t=e.data&&e.data.messages?e.data.messages:[];l--,t.forEach(function(e){var t=s[e.processkey];t&&t.promise?(c-=1,t.promise.resolve(e),delete s[e.processkey]):(f.debug("Delegate to broker. Message received for non-existant processKey = "+e.processkey),d&&d.route(e))}),1>c&&1>l&&(a="slow",l=c=0),h.cancel(u),u=h(v,"slow"==a?i:o)},function(e){l--,h.cancel(u),u=h(v,i),f.debug("We have an error in the asynch provider:"+JSON.stringify(e))}),1>c&&1>l)a="slow";else{var n=Date.now();e.forEach(s,function(e,t){e.expires<n&&(c-=1,delete s[t],e.promise.reject({error:"expired job"}))})}}function A(r,i,l){var d=m.defer(),A={job:r},y=e.extend({},p,i),w=l?l.urlEncoded:!1,b=l?l.noWait:!1,x=Date.now(),k=l.timeToLive?l.timeToLive:600,L=x+1e3*k;return w&&(A["Content-Type"]="application/x-www-form-urlencoded",y=t(y)),g({url:n,method:"post",headers:A,data:y}).then(function(e){var t=e.headers();b?d.resolve(e.data):(s[t.processkey]={promise:d,expires:L},"slow"==a&&(h.cancel(u),a="fast",u=h(v,o)),++c)},function(e){f.debug(JSON.stringify(e))}),d.promise}return u=h(v,"slow"==a?i:o),A.setBroker=function(e){d=e},A.addParameter=function(e,t){p[e]=t},A.expect=function(){l=5,a="fast"},A}]})}(angular),function(e){"use strict";e.module("explorer.broker",[]).factory("brokerService",["$log",function(t){var n={};return{register:function(e,t){e in n||(n[e]={}),n[e][t]=t},deregister:function(e,t){e in n&&t in n[e]&&delete n[e][t]},route:function(r){r.jobName&&n[r.jobName]?e.forEach(n[r.jobName],function(e){e.process(r)}):t.debug("No handler found for "+r.jobName)}}}])}(angular),function(e){"use strict";e.module("explorer.config",["explorer.httpdata","explorer.waiting"]).provider("configService",function(){var e,t,n="service/appConfig/config",r="service/appConfig/config?t=",i=Date.now()%1e7;this.location=function(e){n=e},this.dynamicLocation=function(e){r=e},this.$get=["$q","httpData","waiting",function(o,a,s){var c={getConfig:function(e){var t;return e?(t=o.defer(),this._getConfig().then(function(n){t.resolve(n[e])}),t.promise):this._getConfig()},_getConfig:function(){var c;return t||(t=s.wait()),e?o.when(e):(c=t.waiter(),t.length<2&&a.get(n,{cache:!0}).then(function(n){function o(){e=n,n.localClientSessionId=n.clientSessionId+"-"+i,t.resolve(n),t=null}n.clientSessionId&&n.version?o():a.get(r+Date.now()).then(function(e){n.clientSessionId=e.clientSessionId,n.version=e.version,o()})}),c.promise)}};return c}]})}(angular),function(e){"use strict";e.module("explorer.confirm",["ui.bootstrap","explorer.focusme"]).directive("expConfirm",["confirmService",function(e){return{scope:{success:"&",cancel:"&",expConfirm:"="},link:function(t,n){n.on("click",function(n){e.confirm(t)})}}}]).factory("confirmService",["$log","$modal",function(e,t){return{confirm:function(n){var r;n.confirmed=!1,r=t.open({templateUrl:"components/confirm/confirm.html",size:"sm",backdrop:"static",keyboard:!1,controller:["$scope","$modalInstance","message",function(e,t,n){e.message=n,e.accept=function(){t.close(!0)},e.reject=function(){t.close(!1)}}],resolve:{message:function(){return n.expConfirm}}}),r.opened.then(function(){}),r.result.then(function(t){e.info("Confirmed : "+t),t?n.success():n.cancel&&n.cancel()})}}}])}(angular),function(e){"use strict";e.module("explorer.drag",[]).directive("dragParent",["$document","$timeout",function(e,t){return{link:function(n,r,i){function o(e){var n=e.pageX-s,r=e.pageY-c,i=document.body.getBoundingClientRect();n<10-l.width?n=10-l.width:n>i.width-10&&(n=i.width-10),0>r?r=0:r>i.height-25&&(r=i.height-25),d.css({top:r+"px",left:n+"px",right:"",bottom:""}),t.cancel(u),u=t(a,2e3)}function a(){e.off("mousemove",o),e.off("mouseup",a)}var s,c,l,u,d=null;r.css({cursor:"pointer"}),r.on("mousedown",function(n){n.preventDefault(),d||(d=r,i.parentclass&&(d=r.closest("."+i.parentclass))),u=t(a,2e3),l=d[0].getBoundingClientRect(),c=n.pageY-l.top,s=n.pageX-l.left,e.on("mousemove",o),e.on("mouseup",a)})}}}])}(angular),function(e){"use strict";e.module("explorer.enter",[]).directive("expEnter",[function(){return{scope:{expEnter:"&"},link:function(e,t,n){t.on("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.expEnter()}),t.preventDefault())})}}}])}(angular),function(e,t){"use strict";e.module("explorer.feature.indicator",["explorer.projects"]).factory("indicatorService",["$log","$q","$http","$rootScope","projectsService","assetsService",function(n,r,i,o,a,s){var c="service/asset/counts",l=null,u=null,d=null;return{checkImpact:function(n){var o,p;return p=d=new Date,l&&l.resolve(null),o=l=r.defer(),a.getCurrentProject().then(function(r){r="Explorer",i.post(c,{wkt:n,md5:u,project:r}).success(function(n,r){if(p==d&&n.refreshRequired)if(200==r)s.getAssets().then(function(t){var r=n.countMap;u=n.md5,e.forEach(t,function(e,t){e.count=r[t]?r[t]:0})});else{var i="We have problem checking indicators.";n&&(e.isString(n)&&(i=t.parse(n)),n.error&&(i=n.error))}o.resolve(n),l=null})}),o.promise}}}])}(angular,JSON),function(e){"use strict";e.module("explorer.flasher",[]).factory("flashService",["$timeout",function(e){var t={items:[]};return{getData:function(){return t},add:function(n,r,i){"undefined"==typeof i&&(i=!1);var o={text:n,spinner:i,service:this,remove:function(){this.service.remove(this)}},a=this;return r=r?r:1e4,t.items.push(o),o.timer=e(function(){o.timer=null,a.remove(o)},r),o},remove:function(n){if(n){n.timer&&e.cancel(n.timer);var r=t.items.indexOf(n);r>-1&&t.items.splice(r,1)}}}}]).directive("explorerFlash",["flashService","$timeout",function(e,t){return{restrict:"AE",controller:["$scope","flashService",function(e,t){e.messages=t.getData()}],templateUrl:"components/flasher/flash.html",link:function(e,t,n){t.addClass("marsFlash")}}}])}(angular),function(e){"use.strict";e.module("explorer.focusme",[]).directive("focusMe",["$log","$timeout",function(e,t){return{link:function(e,n,r){r.$observe("focusMe",function(e){"true"===e&&t(function(){n.focus()})})}}}])}(angular),function(e){"use strict";e.module("page.footer",[]).directive("pageFooter",[function(){return{restrict:"EA",templateUrl:"components/footer/footer.html"}}]).directive("explorerFooter",["$timeout",function(e){return{restrict:"EA",controller:["$scope",function(e){}],link:function(t,n,r){function i(e){n.delay(e).animate({bottom:-t.originalHeight+7},1e3,function(){t.hidden=!0})}function o(){n.animate({bottom:0},1e3,function(){t.hidden=!1})}t.originalHeight=n.height(),n.on("mouseenter",function(n){t.timeout&&(e.cancel(t.timeout),t.timeout=null),t.timeout=e(function(){o(),t.timeout=null},300)}),n.on("mouseleave",function(){null!==t.timeout?(e.cancel(t.timeout),t.timeout=null):i(0)}),i(3e3)}}}])}(angular),function(e){"use strict";e.module("explorer.googleanalytics",[]).directive("expGa",["$window","ga",function(e,t){return{restrict:"A",replace:!1,scope:{expGa:"="},link:function(e,n,r){function i(){t(e.expGa)}var o=r.gaOn||"click";"init"==o?i(e.ga):n.on(o,i)}}}]).factory("ga",["$log","$window",function(e,t){return function(){t.ga?t.ga.apply(this,arguments):(e.warn("No Google Analytics"),e.warn(scope.expGa))}}])}(angular),function(e,t){"use strict";e.module("graph",[]).directive("explorerGraph",["$log",function(e){var n=90;return{templateUrl:"components/graph/lineGraph.html",scope:{data:"=",config:"=",enter:"&",leave:"&",move:"&",click:"&",showZeroLine:"="},controller:["$scope",function(e){e.round=function(e){return Math.round(e)},e.showZeroLine=!!e.showZeroLine}],link:function(r,i){function o(t){var n,o,a=i.find("svg")[0],s=a.getBoundingClientRect(),c=1050/s.width,l=Math.floor((t.pageX-s.left)*c-48);r.lastIndex!=l&&(r.lastIndex=l,l>-1&&1e3>l?(n=[],r.data.forEach(function(t){var r=Math.round(l*t.data.length/1e3),i=t.data[r];e.debug(r),n.push({index:r,point:i})}),o=l,r.position={index:l,percentX:(l+1)/10,rangeY:r.rangeY,y:{range:r.rangeY,max:r.maxY,min:r.minY},graphX:o,graphY:t.pageY-s.top,pageX:t.pageX,pageY:t.pageY,points:n,point:n.length>0?n[0].point:null}):r.position=null)}function a(i){function o(e,n,r){var i,o=n-e;return r||(r=5),i=5>o?1:12>o?2:24>o?5:60>o?10:120>o?20:240>o?50:600>o?100:1200>o?200:2400>o?500:6e3>o?1e3:12e3>o?2e3:24e3>o?5e3:6e4>o?1e4:2e4,t.range(e-Math.abs(e%i)+i,n+(i-Math.abs(n%i)),i)}i||(i=[[]]),e.debug(i.length);var a=[];i.forEach(function(e){e.data&&a.push.apply(a,e.data)}),r.minY=t.min(a,function(e){return e.z}),r.maxY=t.max(a,function(e){return e.z}),r.rangeY=r.maxY-r.minY,r.yTicks=o(r.minY,r.maxY),r.y=t.scale.linear().range([n,0]),r.y.domain(t.extent(a,function(e){return e.z}))}r.mouseLeave=function(e){r.position=null,r.leave&&r.leave({event:e})},r.mouseEnter=function(e){r.enter&&r.enter({event:e})},r.mouseMove=function(e){o(e),e.position=r.position,r.move&&r.move({event:e})},r.mouseClick=function(e){e.preventDefault(),r.click&&(e.position=r.position,r.click({event:e}))},r.$watch("data",a),a()}}}]).directive("explorerLine",[function(){var e=1e3,n=90;return{restrict:"AE",controller:["$scope",function(r){function i(i){var a=i.data;if(!a||!a.length)return void(r.calculateLines=r.calculatePath=o);r.minX=0,r.maxX=a.length,r.rangeX=a.length,r.deltaLength=1;var s=t.time.scale().range([0,e]),c=r.y;s.domain(t.extent(a,function(e,t){return t})),r.calculatePath=t.svg.area().interpolate("monotone").x(function(e,t){return s(t)}).y0(n).y1(function(e){return c(null!==e.z?e.z:r.minY)}),r.calculateLine=t.svg.line().interpolate("monotone").x(function(e,t){return s(t)}).y(function(e){return c(null!==e.z?e.z:r.minY)}),r.line=r.calculateLine(a),r.path=r.calculatePath(a)}function o(){return""}r.$watch("points",i)}]}}])}(angular,d3),function(e){"use strict";e.module("explorer.header",[]).controller("headerController",["$scope","$q","$timeout",function(e,t,n){var r=function(e){return e};e.$on("headerUpdated",function(t,n){e.headerConfig=r(n)})}]).directive("explorerHeader",[function(){var t={heading:"Geoscience Australia",headingtitle:"Geoscience Australia",helpurl:"help.html",helptitle:"Get help about Geoscience Australia",helpalttext:"Get help about Geoscience Australia",skiptocontenttitle:"Skip to content",skiptocontent:"Skip to content",quicklinksurl:"/search/api/quickLinks/json?lang=en-US"};return{transclude:!0,restrict:"EA",templateUrl:"components/header/header.html",scope:{heading:"=",headingtitle:"=",helpurl:"=",helptitle:"=",helpalttext:"=",skiptocontenttitle:"=",skiptocontent:"=",quicklinksurl:"="},link:function(n,r,i){e.copy(t);e.forEach(t,function(e,t){t in n||(n[t]=e)})}}}])}(angular),function(e,t,n){"use strict";n.module("explorer.height.delta",[]).directive("heightDelta",["$timeout",function(n){return{link:function(r,i,o){function a(t){var n,r,a,s=o.heightDelta;s&&(n=JSON.parse(s),r=e(n.selector).height(),a=r+n.delta,(!n.min||a>n.min)&&i.height(a))}e(t).on("resize",function(){a(!1)}),n(function(){a(!0)})}}}])}($,window,angular),function(e){"use strict";e.module("explorer.httpdata",[]).factory("httpData",["$http","$q",function(e,t){return{get:function(e,t){return this._method("get",e,t)},post:function(e,t){return this._method("post",e,t)},put:function(e,t){return this._method("put",e,t)},_method:function(n,r,i){var o=t.defer();return e[n](r,i).then(function(e){o.resolve(e?e.data:null)},function(e){o.reject(e)}),o.promise}}}])}(angular),function(e,t){"use strict";e.module("explorer.httpinterceptors",["explorer.httpinterceptors.message","explorer.httpinterceptors.authentication"]),e.module("explorer.httpinterceptors.message",[]).factory("messageHttpInterceptor",["$q","$log","messageService",function(t,n,r){var i=function(t){var n,i=t?t.data:null;e.isObject(i)&&"text"in i&&"code"in i&&("type"in i||"severity"in i)&&(n={text:t.data.text,type:(t.data.type?t.data.type:t.data.severity).toLowerCase(),show:!0},r[n.type](n.text))};return{response:function(e){return i(e),e},responseError:function(e){return i(e),t.reject(e)}}}]).config(["$httpProvider",function(e){e.interceptors.push("messageHttpInterceptor")}]),e.module("explorer.httpinterceptors.authentication",[]).factory("expHttpInterceptor",["$rootScope","$q",function(e,n){return{responseError:function(n){if(n&&401!==n.status&&0!==n.status&&302!==n.status){if(403!==n.status)return n;e.$broadcast("unauthorized")}else t.location.reload()}}}]).config(["$httpProvider",function(e){e.interceptors.push("expHttpInterceptor")}])}(angular,window),function(e){"use strict";e.module("explorer.info",[]).directive("expInfo",["$document","$animate",function(e,t){return{restrict:"EA",transclude:!0,replace:!0,scope:{title:"@",isOpen:"="},templateUrl:"components/info/info.html",link:function(t,n){function r(e){27==e.which&&(e.stopPropagation(),e.preventDefault(),t.$apply(function(){t.isOpen=!1}))}t.$watch("isOpen",function(n){n?e.on("keyup",r):e.off("keyup",r),t.$on("$destroy",function(){e.off("keyup",r)})})}}}])}(angular),function(e){"use strict";e.module("knob",[]).directive("knob",["$document",function(t){var n={circleColor:"#A33F1F",min:0,max:10,startAngle:0,pointerColor:"#72C7E7",degrees:30,label:""},r=1;return{templateUrl:"components/knob/knob.html",restrict:"AE",scope:{knob:"=",value:"=",disabled:"=?",mapToPercentage:"=?",mapFromPercentage:"=?"},link:function(i,o){function a(e){var t=e.keyCode;!i.disabled&&t>=37&&40>=t&&i.$apply(function(){e.preventDefault();var n=1+9*e.shiftKey;u({37:-1,38:1,39:1,40:-1}[t]*n)})}function s(e){i.disabled||i.$apply(function(){var t=-e.detail||e.wheelDeltaX,n=-e.detail||e.wheelDeltaY,r=t>0||n>0?1:0>t||0>n?-1:0;e.preventDefault(),u(r)})}function c(e,n){var r=o[0].getBoundingClientRect();i.disabled||(i.centerX=r.left+r.width/2,i.centerY=r.top+r.height/2,t.on(e,l),t.on(n,function(){t.off(e,l)}))}function l(e){var t,n=e.changedTouches?e.changedTouches[0]:e,r=i.centerX-n.pageX,o=i.centerY-n.pageY,a=180*Math.atan2(-o,-r)/Math.PI+90-i.config.startAngle;e.preventDefault(),0>a&&(a+=360),a%=360,t=a<=i.range?Math.max(Math.min(1,a/i.range),0):+(a-i.range<(360-i.range)/2),t=100*t,i.value=i.mapFromPercentage.bind(i.config)(t),i.$apply()}function u(e){var t;i.angle=d(i.angle+i.config.degrees*e),t=(i.angle-i.config.startAngle)/i.range*100,i.value=i.mapFromPercentage.bind(i.config)(t)}function d(e){var t=i.config.startAngle+i.range;return e<i.config.startAngle?i.config.startAngle:e>t?t:e}var p,f={keydown:a.bind(this),mousewheel:s.bind(this),DOMMouseScroll:s.bind(this),touchstart:c.bind(this,"touchmove","touchend"),mousedown:c.bind(this,"mousemove","mouseup")};i.knobShadow="knobshadow_"+r++,o[0].tabIndex=0;for(var g in f)o.on(g,f[g]);if(!i.knob.ticks&&!i.knob.step&&e.isNumber(i.knob.min)&&e.isNumber(i.knob.max)&&(i.knob.steps=i.knob.max-i.knob.min,i.knob.step=1),i.config=e.extend({},n,i.knob),i.knob&&i.knob.ticks)i.ticks=i.config.ticks=i.knob.ticks;else{for(i.ticks=[],p=0;p<=i.config.steps;p++)i.ticks[p]=i.config.min+p*i.config.step;i.config.ticks=i.ticks}i.range=(i.ticks.length-1)*i.config.degrees,i.checkDisabled=function(){return i.disabled?"opacity:0.5;cursor:auto":"cursor:grab"},i.mapToPercentage||(i.mapToPercentage=function(e){var t=this.max-this.min;return(e-this.min)/t*100}),i.mapFromPercentage||(i.mapFromPercentage=function(e){return this.min+(this.max-this.min)*e/100}),i.$watch("value",function(e){i.percentage=i.mapToPercentage.bind(i.config)(e),i.angle=i.config.startAngle+i.range*i.percentage/100})}}}])}(angular),function(e){"use strict";e.module("explorer.legend",[]).directive("explorerLegend",["$modal",function(e){return{scope:{legend:"=",heading:"=?"},controller:["$scope",function(e){e.heading||(e.heading="Legend"),e.showing=!1}],link:function(t,n){var r;n.on("click",function(){return t.showing?void r.close(null):(r=e.open({templateUrl:"components/legend/legend.html",windowClass:"legendContainer",size:"sm",controller:["$scope","$modalInstance","legend","heading",function(e,t,n,r){e.legend=n,e.heading=r}],backdrop:!1,resolve:{legend:function(){return t.legend},heading:function(){return t.heading}}}),r.result.then(function(){t.showing=!1},function(){t.showing=!1}),void(t.showing=!0))})}}}])}(angular),function(e){"use strict";e.module("explorer.message",[]).directive("explorerMessages",["messageService",function(e){return{restrict:"AE",controller:"MessageController",templateUrl:"components/message/messages.html",link:function(e,t,n,r){}}}]).factory("messageService",["$rootScope",function(e){return{warn:function(e){this._message("warn",e)},success:function(e){this._message("success",e)},info:function(e){this._message("info",e)},error:function(e){this._message("error",e)},clear:function(){e.$broadcast("message.clear")},_message:function(t,n){e.$broadcast("message.posted",{type:t,text:n,time:new Date})}}}]).controller("MessageController",["$scope","$timeout","$rootScope",function(e,t,n){e.controller="MessageController",e.persistDuration=12e3,e.historicCount=10,e.message=null,e.historic=[],n.$on("message.posted",function(n,r){var i=e.$root.$$phase;"$apply"==i||"$digest"==i?e.message=r:this.$apply(function(){e.message=r}),t.cancel(e.timeout),e.timeout=t(function(){e.$apply(function(){e.removeMessage()})},e.persistDuration)}),n.$on("message.cleared",e.removeMessage),e.removeMessage=function(){for(e.timeout=null,e.historic.splice(0,1,e.message);e.historic.length>10;)e.historic.pop();e.message=null}}]).run(["$rootScope","messageService",function(t,n){t.$on("message:info",function(e,t){n.info(t)}),t.$on("message:error",function(e,t){n.error(t)}),t.$on("message:success",function(e,t){n.success(t)}),t.$on("message:warn",function(e,t){n.warn(t)}),t.$on("message:clear",function(e){n.warn(e)}),t.$on("messages",function(n,r){r=r?e.isArray(r)?r:[r]:[],e.forEach(r,function(e){t.$broadcast("message:"+e.type.toLowerCase(),e.text)})})}])}(angular),function(e){"use strict";e.module("explorer.modal",[]).directive("expModal",["$document","$animate","modalService",function(e,t,n){return{restrict:"EA",transclude:!0,replace:!0,scope:{iconClass:"@",title:"@",containerStyle:"@",template:"=",placement:"@",animation:"&",onClose:"&",isOpen:"=",isModal:"="},templateUrl:"components/modal/modal.html",link:function(e,t){function r(t){27==t.which&&(t.stopPropagation(),t.preventDefault(),e.$apply(function(){e.isOpen=!1}))}e.$watch("isOpen",function(i,o){i?(t.css("zIndex",n.index()),t.on("keyup",r)):(t.off("keyup",r),i!=o&&(n.closed(),e.onClose())),e.$on("$destroy",function(){t.off("keyup",r)})})}}}]).directive("expModalUp",["$document","$animate","modalService",function(e,t,n){return{link:function(e,t){t.on("mousedown",function(r){e.isModal&&(e.modalIndex=n.index()),t.css("zIndex",n.index())})}}}]).factory("modalService",[function(){var e=1030,t=e,n=0;return{index:function(){return 0===n&&(t=e),n++,t++},closed:function(){n--,0>n&&(n=0)}}}])}(angular),function(e,t){"use strict";e.module("explorer.persist",["explorer.projects"]).provider("persistService",function(){var e=null;this.$get=["persistLocalService","persistRemoteService",function(t,n){return"local"==e?t:n}],this.handler=function(t){e=t}}).factory("persistRemoteService",["$log","$q","projectsService","serverPersistService","userService",function(e,n,r,i,o){return{setGlobalItem:function(e,t){this._setItem("_system",e,t)},setItem:function(e,t){r.getCurrentProject().then(function(n){this._setItem(n,e,t)}.bind(this))},_setItem:function(n,r,a){e.debug("Fetching state for key "+r),o.getUsername().then(function(e){t.setItem("mars."+e+"."+n+"."+r,JSON.stringify(a)),i.persist(n,r,a)})},getGlobalItem:function(e){return this._getItem("_system",e)},getItem:function(e){var t=n.defer();return r.getCurrentProject().then(function(n){this._getItem(n,e).then(function(e){t.resolve(e)})}.bind(this)),t.promise},_getItem:function(r,a){e.debug("Fetching state for key "+a);var s=n.defer();return o.getUsername().then(function(e){var n=t.getItem("mars."+e+"."+r+"."+a);if(n){try{n=JSON.parse(n)}catch(o){}s.resolve(n)}else i.retrieve(r,a).then(function(e){s.resolve(e)},function(e){})}),s.promise}}}]).factory("serverPersistService",["$log","httpData","projectsService","userService","$q",function(t,n,r,i,o){return{persist:function(t,r,i){var a=o.defer();if(e.isString())try{JSON.parse(i)}catch(s){i='"'+i+'"'}return n.post("service/state/item/"+t+"/"+r,i).then(function(e){a.resolve(e)}),a.promise},retrieve:function(e,t){return n.get("service/state/item/"+e+"/"+t)}}}]).factory("persistLocalService",["$log","$q","projectsService",function(e,t,n){return{setGlobalItem:function(e,t){this._setItem("_system",e,t)},setItem:function(e,t){n.getCurrentProject().then(function(n){this._setItem(n,e,t)}.bind(this))},_setItem:function(t,n,r){e.debug("Fetching state for key locally"+n),localStorage.setItem("mars.anon."+t+"."+n,JSON.stringify(r))},getGlobalItem:function(e){return this._getItem("_system",e)},getItem:function(e){var r=t.defer();return n.getCurrentProject().then(function(t){this._getItem(t,e).then(function(e){r.resolve(e)})}.bind(this)),r.promise},_getItem:function(n,r){e.debug("Fetching state locally for key "+r);var i=localStorage.getItem("mars.anon."+n+"."+r);if(i)try{i=JSON.parse(i)}catch(o){}return t.when(i)}}}])}(angular,localStorage,sessionStorage),function(e){"use strict";e.module("explorer.ping",[]).provider("pingService",function(){var e="service/ping/keepalive",t=600,n=!0,r=null;this.location=function(t){e=t},this.enable=function(e){n=e},this.$get=["$http","$timeout",function(i,o){function a(){n&&i.post(e),r=o(a,1e3*t)}var s={enable:function(e){n=e},period:function(e){t=e},start:function(){}};return a(),s}]})}(angular),function(e){"use strict";e.module("explorer.popover",[]).directive("expPopover",[function(){return{templateUrl:"components/popover/popover.html",restrict:"A",transclude:!0,scope:{closeOnEscape:"@",show:"=",containerClass:"=",direction:"@"},link:function(e,t){function n(t){27==t.which&&(t.stopPropagation(),t.preventDefault(),e.$apply(function(){e.show=!1}))}e.direction||(e.direction="bottom"),!e.closeOnEscape||e.closeOnEscape!==!0&&"true"!==e.closeOnEscape||t.on("keyup",n)}}}])}(angular),function(e,t){"use strict";e.module("mars.print",[]).directive("marsPrintMap",[function(){return{template:'<i class="fa fa-print"></i>',link:function(e,n){n.on("click",function(){t.print()})}}}])}(angular,window),function(e){"use strict";e.module("explorer.projects",[]).provider("projectsService",function(){var e="<NONE>";this.$get=["$q","$timeout","$http",function(t,n,r){var i="service/appConfig/projects?t=";return{getCurrentProject:function(){return t.when(e)},getProjects:function(){var e=t.defer();return this.projects&&n(function(){e.resolve(this.projects)}.bind(this)),r.get(i+(new Date).getTime()).then(function(t){this.projects=t,e.resolve(this.projects)}.bind(this)),e.promise}}}],this.setProject=function(t){e=t}})}(angular),angular.module("explorer.resizelistener",[]).directive("resizeListener",function(e){return function(t,n){var r=angular.element(e);t.getWindowDimensions=function(){return{h:r.height(),w:r.width()}},t.$watch(t.getWindowDimensions,function(e,n){t.windowHeight=e.h,t.windowWidth=e.w,t.style=function(){return{height:e.h-100+"px",width:e.w-100+"px"}}},!0),r.bind("resize",function(){t.$apply()})}}),function(e,t){"use strict";e.module("nedf.splash",["explorer.projects"]).directive("marsSplash",["$rootScope","$modal","$log","userService",function(e,t,n,r){return{controller:["$scope","splashService",function(e,t){e.acceptedTerms=!0,t.getReleaseNotes().then(function(t){e.releaseMessages=t,e.acceptedTerms=r.hasAcceptedTerms()})}],link:function(i,o){var a;i.$watch("acceptedTerms",function(e){e||(a=t.open({templateUrl:"partials/splash.html",size:"lg",backdrop:"static",keyboard:!1,controller:["$scope","$modalInstance","acceptedTerms","messages",function(e,t,n,r){e.acceptedTerms=n,e.messages=r,e.accept=function(){t.close(!0)}}],resolve:{acceptedTerms:function(){return i.acceptedTerms},messages:function(){return i.messages}}}),a.result.then(function(e){n.info("Accepted terms"),i.acceptedTerms=e,r.setAcceptedTerms(e)},function(){n.info("Modal dismissed at: "+new Date)}))}),e.$on("logoutRequest",function(){r.setAcceptedTerms(!1)})}}}]).factory("splashService",["$http","$q","projectsService",function(e,n,r){function i(e){e?t.setItem(a,!0):t.removeItem(a)}function o(){return!!t.getItem(a)}var a="nedf.accepted.terms",s="service/releaseNotes/";return{getReleaseNotes:function(){var t=n.defer();return r.getCurrentProject().then(function(n){e({method:"GET",url:s+n+"?t="+Date.now()}).then(function(e){t.resolve(e.data)})}),t.promise},hasViewedSplash:o,setHasViewedTerms:i}}]).filter("priorityColor",[function(){var e={IMPORTANT:"red",HIGH:"blue",MEDIUM:"orange",LOW:"gray"};return function(t){return t in e?e[t]:"black"}}]).filter("wordLowerCamel",function(){return function(e){return e.charAt(0)+e.substr(1).toLowerCase()}}).filter("sortNotes",[function(){return function(e){var t=e.slice(0).sort(function(e,t){return e.priority==t.priority?e.lastUpdate==t.lastUpdate?0:t.lastUpdate-e.lastUpdate:"IMPORTANT"==e.priority?-11:1});return t}}])}(angular,sessionStorage),function(e,t){"use strict";t.module("mars.splitter",[]).directive("marsExpand",["$rootScope","$timeout",function(t,n){return{link:function(r,i,o){var a=function(){var n=e("#horizontal").data("kendoSplitter");r.marsRightView==o.marsExpand?(n.collapse(".mainSplitterRight"),r.marsRightView=null):(n.expand(".mainSplitterRight"),r.marsRightView=o.marsExpand,t.$broadcast("show.right.panel",o.marsExpand))};i.on("click",function(){n.cancel(r.marsRightExpandTimeout),a()}),i.on("mouseenter",function(e){r.marsRightExpandTimeout=n(a,400)}),i.on("mouseleave",function(){n.cancel(r.marsRightExpandTimeout)}),t.$on("right.tab.deselected",function(){n(function(){e("#horizontal").data("kendoSplitter").collapse(".mainSplitterRight"),r.marsRightView=null})})}}}]).directive("marsSplitter",["$rootScope","$timeout","mapService",function(t,n,r){return{link:function(i,o,a){r.getMap().then(function(e){this.map=e}.bind(this)),o.kendoSplitter({panes:[{collapsible:!1},{collapsible:!0,collapsed:!0,size:"360px"}],resize:function(t){setTimeout(function(){var t=o.find(".rightPane").width()+7;e(".marsExpandContainer").css("right",t+"px")},0)}}),t.$on("vertical.tab.deselected",function(){n(function(){o.data("kendoSplitter").collapse(".rightPane")})})}}}]).controller("MapSlideController",["$scope","$rootScope","$timeout",function(e,t,n){e.controller="MapSlideController",e.scrollTop=0,e.filterNames={point:!0,line:!0,area:!0,network:!0},e.cancelHide=function(){n.cancel(e.hideTimeout)},e.delayedRightHide=function(){e.pinnedRight||(e.hideRightTimeout=n(function(){e.lastView="",t.$broadcast("right.tab.deselected")},3e3))},e.cancelRightHide=function(){n.cancel(e.hideRightTimeout)},e.show=function(r){n.cancel(e.showTimeout),r==e.lastView?e.showTimeout=n(function(){e.lastView="",t.$broadcast("vertical.tab.deselected")},400):n(function(){e.lastView=r,t.$broadcast("vertical.tab.selected",r)},400)},e.$on("pinned.right.changed",function(t,n){e.pinnedRight=n}),e.$on("pinned.left.changed",function(t,n){e.pinnedLeft=n}),e.toggleShow=function(e){e||(e=this.feature),e.displayed=e.handleShow()},e.viewLegend=function(e){}}])}($,angular),function(e){"use strict";e.module("explorer.switch",[]).directive("explorerSwitch",[function(){return{restrict:"EA",scope:{disabled:"=",onLabel:"@",offLabel:"@",knobLabel:"@",model:"="},template:'<div role="radio" class="toggle-switch" ng-class="{ \'disabled\': disabled }"><div class="toggle-switch-animate" ng-class="{\'switch-off\': !model, \'switch-on\': model}"><span class="switch-left switch-text" ng-bind="onLabel"></span><span class="switch-label-text" ng-bind="knobLabel"></span><span class="switch-right switch-text" ng-bind="offLabel"></span></div></div>',link:function(e,t){e.onLabel||(e.onLabel="On"),e.offLabel||(e.offLabel="Off"),e.knobLabel||(e.knobLabel="Â "),e.disabled||(e.disabled=!1),t.on("click",function(){e.$apply(e.toggle)}),e.toggle=function(){e.disabled||(e.model=!e.model)}}}}])}(angular),function(e){"use strict";e.module("explorer.tabs",[]).controller("tabsController",["$scope","$document",function(e,t){var n=300,r=window.innerWidth||document.documentElement.clientWidth,i=540;e.view="",e.contentWidth=0,e.contentLeft=0,e.winHeight=window.innerHeight||document.documentElement.clientHeight,e.setView=function(t){e.view===t?(e.view="",i=e.contentWidth,e.contentWidth=0,e.contentLeft=0):(e.view=t,e.contentWidth=i,e.contentLeft=e.contentWidth)},e.catchResize=function(){function n(t){e.doResize(t)}function r(){t.off("mousemove",n),t.off("mouseup",r)}t.on("mousemove",n),t.on("mouseup",r)},e.doResize=function(t){var o=r-t.pageX;o=o>n?o:n,e.contentWidth=o,e.contentLeft=o,i=o,e.$apply()},e.callback=function(){}}])}(angular),angular.module("explorer.tabs.left",[]).controller("tabsLeftController",["$scope","$document",function(e,t){var n=400,r=(window.innerWidth||document.documentElement.clientWidth,700);e.view="",e.contentWidth=0,e.winHeight=window.innerHeight||document.documentElement.clientHeight,e.setView=function(t){e.view===t?(e.view="",r=e.contentWidth,e.contentWidth=0):(e.view=t,e.contentWidth=r)},e.catchResize=function(){function n(t){e.doResize(t)}function r(){t.off("mousemove",n),t.off("mouseup",r)}t.on("mousemove",n),t.on("mouseup",r)},e.doResize=function(t){var i=t.pageX+2;i=i>n?i:n,e.contentWidth=i,r=i,e.$apply()}}]),function(e){"use strict";e.module("explorer.toolbar",[]).directive("expToolbar",[function(){return{restrict:"AE",scope:!0,controller:["$scope",function(e){e.item="",e.parameters={},e.toggleItem=function(t){e.item=e.item==t?"":t},this.toggleItem=function(t){e.item=e.item==t?"":t},this.currentItem=function(){return e.item}}]}}])}(angular),function(e,t,n){"use strict";e.module("explorer.user",[]).directive("marsUserDetails",["userService","$rootScope","$location",function(e,t,n){return{restrict:"EA",templateUrl:"components/user/userdetails.html",link:function(t,n,r){e.getUsername().then(function(e){t.username=e})}}}]).provider("userService",function(){var e="service/appConfig/status";this.url=function(t){e=t},this.$get=["$http","$q","$timeout",function(r,i,o){function a(){n.location.reload()}function s(e){e?t.setItem("mars.accepted.terms",!0):t.removeItem("mars.accepted.terms")}function c(){return!!t.getItem("mars.accepted.terms")}function l(){return r.get(e+"?time="+(new Date).getTime())}var u;return{login:function(){a()},hasAcceptedTerms:function(){return c()},setAcceptedTerms:function(e){s(e)},getUsername:function(){var e;return u?i.when(u):(e=i.defer(),l().then(function(t){t&&(u=t.data.username),e.resolve(u)}),e.promise)}}}]})}(angular,sessionStorage,window),function(e){"use strict";e.module("explorer.usermaps",["explorer.persist.local","explorer.flasher","explorer.vector"]).directive("addMaps",["userMapService","persistService","flashService","vectorService",function(t,n,r,i){
return{templateUrl:"components/usermaps/addmaps.html",controller:["$scope",function(o){function a(e,t,n){if(n>=e.length)for(var r=n-e.length;r--+1;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}function s(t){var n={};return e.forEach(d,function(e,r){n[r]=t[r]}),n}function c(){o.status.edit&&l()}function l(){var e=[];o.maps&&o.maps.forEach(function(t){e.push(s(t))}),n.setItem("userMaps",e)}function u(e){return e.isWrapped?e:(e.isWrapped=!0,e.layer||t.addLayer(e,!1),e.handleShow=function(){return this.layer.setVisibility(this.layer.visibility?!1:!0),this.layer.visibility},e)}var d={assetId:"",name:"",description:"",url:"",legendUrl:"",layers:[],projection:"EPSG:3857",thumbnailUrl:""},p="";n.getItem("userMaps").then(function(t){t?(t.forEach(function(t){e.isString(t.layers)&&(t.layers=t.layers.split(","))}),o.maps=t):o.maps=[],p=JSON.stringify(o.maps)}),i.restore().then(function(e){o.vectors=e}),o.active=null,o.status={mapOpen:!1,vectorOpen:!1},o.clearOpen=function(){o.status.mapOpen=o.status.vectorOpen=!1},o.setOpen=function(e){o.clearOpen(),o.status[e+"Open"]=!0},o.work=e.copy(d),o.editMap=function(){o.status.edit=!0,o.status.editDisplayed=this.map.displayed,o.setOpen("map"),o.work=this.map,r.add("Updates are immediately saved.",3e3)},o.toggleShow=function(){t.toggleShow(this.map)},o.makeActive=function(){o.active=u(this.map)},o.addMap=function(){var n=o.work;o.status.edit?o.status.edit=!1:(n.assetId="map"+Date.now(),o.maps.push(n)),t.removeLayer(n),o.clearOpen(),o.work=e.copy(d),r.add("Your map has been saved.",3e3),l()},o.addLayer=function(){var e=!1,n=this.workLayer.trim();n&&(o.work.layers.forEach(function(t){e|=t==n}),e?r.add("Duplicate layer names are not allowed",3e3):(r.add("Refreshing view with new layer.",3e3),o.work.layers.push(n),this.workLayer="",t.refreshLayer(o.work,!0),c()))},o.shuffleUp=function(){var e=o.work.layers.indexOf(this.layer);0!==e&&(r.add("Refreshing view with new layer order.",3e3),a(o.work.layers,e,e-1),t.refreshLayer(o.work,!0),c())},o.shuffleDown=function(){var e=o.work.layers.indexOf(this.layer);e!=o.work.layers.length-1&&(r.add("Refreshing view with new layer order.",3e3),a(o.work.layers,e,e+1),t.refreshLayer(o.work,!0),c())},o.removeLayer=function(){var e=o.work.layers.indexOf(this.layer);o.work.layers.splice(e,1),o.work.layers.length?r.add("Refreshing view with new layer order.",3e3):r.add("No preview of map with no layers.",3e3),t.refreshLayer(o.work,!0),l()},o.clear=function(){o.work=e.copy(d),o.status.edit=!1,o.clearOpen()},o.isTestable=function(){return o.work&&o.work.url&&o.work.layers},o.isComplete=function(){return o.isTestable()&&o.work.name},o.removeMap=function(){var e=o.maps.indexOf(this.map);e>-1&&(t.removeLayer(this.map),o.maps.splice(e,1),this.map==o.active&&(o.active=null)),o.status.edit=!1,l()},o.$watch("removalCandidate",function(e){}),o.$watch("status.open",function(n,r){"map"!=n&&"map"==r&&(t.refreshLayer(o.work,o.status.editDisplayed),o.work=e.copy(d),o.status.edit=!1,o.status.editDisplayed=!1,l())})}]}}]).factory("userMapService",["mapService","$q",function(e,t){return{toggleShow:function(e){e.layer&&e.layer.map?this.removeLayer(e):this.addLayer(e)},refreshLayer:function(e,n){var r;return e.layer?(r=t.defer(),this.removeLayer(e).then(function(t){n&&(this.addLayer(e),r.resolve(e))}.bind(this)),r.promise):n&&e.url&&e.layers&&e.layers.length>0?this.addLayer(e):t.when(e)},addLayer:function(n,r){var i=t.defer();if("undefined"==typeof r&&(r=!0),n.displayed=r,n.layer){if(n.layer.map)return n.layer.setVisibility(r),t.when(n);e.getMap().then(function(e){e.addLayer(n.layer),i.resolve(n)})}else n.type="WMS",n.param1=n.url,n.param2={layers:n.layers,transparent:!0},n.param3={visibility:r,isBaseLayer:!1,opacity:1,legend:n.legend},n.layer=e.createLayer(n),e.getMap().then(function(e){e.addLayer(n.layer),i.resolve(n)});return t.promise},removeLayer:function(n){if(n.layer&&n.layer.map){var r=t.defer();return e.getMap().then(function(e){e.removeLayer(n.layer),n.layer=null,n.displayed=!1,r.resolve(n)}),r.promise}return t.when(n)}}}])}(angular),function(e,t,n){"use strict";e.module("explorer.vector",["explorer.flasher","explorer.broker","explorer.persist.local","explorer.message","explorer.config"]).directive("marsVectorEdit",["vectorService","flashService","persistService","brokerService","messageService","configService",function(e,t,n,r,i,o){return{templateUrl:"components/usermaps/vectorEdit.html",require:"^addMaps",link:function(t){o.getConfig().then(function(e){t.localClientSessionId=e.localClientSessionId},function(e){}),r.register("addVectorData",{process:function(n){if(n.data){var r=n.data,o={id:"userVector_"+(new Date).getTime(),name:r.vectorName.content,description:r.vectorDescription.content,dataStr:r.vectorFile.content,fileName:r.vectorFile.fileName,show:!0};o.layer=e.createLayer(o.dataStr,o),o.layer?(t.vectors[o.name]=o,e.persist(t.vectors)):i.error("No GML or KML features found. Are you sure that was a valid vector data file?")}}}),t.saveVectors=function(){t.cancelVectorEdit(),e.persist(t.vectors)},t.cancelVectorEdit=function(){t.clearOpen(),t.status.vectorEdit=!1,t.editVector=null},t.clearVector=function(){}}}}]).directive("vectorsDisplay",["vectorService",function(e){return{templateUrl:"components/usermaps/vectorDisplay.html",restrict:"AE",require:"^addMaps",link:function(t,n){t.showElevation=function(){e.showElevation(this.vector)},t.showFeatureElevation=function(){e.showElevation(this.vector,this.feature)},t.isPath=function(){return this.vector.layer&&this.vector.layer.features&&1==this.vector.layer.features.length&&this.vector.layer.features[0].geometry&&"OpenLayers.Geometry.LineString"==this.vector.layer.features[0].geometry.CLASS_NAME},t.isFeaturePath=function(){return this.feature.geometry&&("OpenLayers.Geometry.LineString"==this.feature.geometry.CLASS_NAME||"OpenLayers.Geometry.MultiLineString"==this.feature.geometry.CLASS_NAME)},t.toggle=function(){this.vector.show?e.hideLayer(this.vector.layer):e.showLayer(this.vector.layer),this.vector.show=!this.vector.show},t.remove=function(){e.hideLayer(this.vector.layer),delete t.vectors[this.vector.name],e.persist(t.vectors)},t.vectorEdit=function(){t.editVector=this.vector,t.setOpen("vector"),t.status.vectorEdit=!0},t.panToVector=function(){e.panTo(this.vector.layer)},t.panToFeature=function(){e.panToFeature(this.feature)}}}}]).directive("ajaxForm",["flashService","$rootScope","asynch","configService",function(e,t,n,r){return{scope:{update:"&",cancel:"&"},link:function(r,i){var o;r.quit=function(){r.cancel()},i.ajaxForm({beforeSubmit:function(i,a,s){r.cancel(),n.expect(),s.dataType="xml",t.safeApply(function(){o=e.add("Processing file...",4e3)})},success:function(n){t.safeApply(function(){e.remove(o)})}})}}}]).service("vectorService",["mapService","persistService","$q","$rootScope",function(n,r,i,o){var a,s="userVectorLayers",c={},l="http://www.opengis.net/gml",u="http://www.opengis.net/wfs",d="http://www.opengis.net/kml";return n.getMap().then(function(e){a=e}),{_whatType:function(e){return e?e.indexOf(d)>-1?"kml":e.indexOf(u)>-1?"wfs":e.indexOf(l)>-1?"gml":void 0:null},_boundsPlusPercent:function(e,n){var r=(e.right-e.left)*n,i=(e.top-e.bottom)*n;return new t.Bounds(e.left-r,e.bottom-i,e.right+r,e.top+i)},persist:function(t){var n=[];e.forEach(t,function(e){var t={id:e.id,name:e.name,description:e.description,dataStr:e.dataStr,show:e.show};n.push(t)}),r.setItem(s,n,!0)},restore:function(){var e=this,t=i.defer();return n.getMap().then(function(n){r.getItem(s).then(function(n){var r={};n&&n.forEach(function(t){t.show=!1,t.layer=e.createLayer(t.dataStr,t),t.dataStr&&t.name&&t.id&&(r[t.name]=t)}),t.resolve(r)})}),t.promise},createLayer:function(e,n){var r,i=c[n.name],o=this._whatType(e);return i||("kml"==o?r=new t.Format.KML({internalProjection:a.baseLayer.projection,externalProjection:new t.Projection("EPSG:4326"),extractAttributes:!0,extractStyles:!0}):("wfs"==o||"gml"==o)&&(r=new t.Format.GML({internalProjection:a.baseLayer.projection,externalProjection:new t.Projection("EPSG:4326"),extractAttributes:!0,extractStyles:!0})),r&&(i=new t.Layer.Vector(n.name),i.addFeatures(r.read(e)),c[n.name]=i)),i&&n.show&&!i.map&&a.addLayer(i),i},showLayer:function(e){this.hideLayer(e),a.addLayer(e)},hideLayer:function(e){e.map&&a.removeLayer(e)},panTo:function(e){var t=this._boundsPlusPercent(e.getDataExtent(),.2);n.getMap().then(function(e){e.zoomToExtent(t)})},panToFeature:function(e){e.geometry.calculateBounds();var t=this._boundsPlusPercent(e.geometry.bounds,.2);n.getMap().then(function(n){e.geometry.calculateBounds(),n.zoomToExtent(t)})},showElevation:function(e,n){n||(n=e.layer.features[0]);var r=n.geometry,i=r.clone().transform(new t.Projection("EPSG:3857"),new t.Projection("EPSG:4326")).getGeodesicLength(),a={length:i,geometry:r,heading:"KML"};o.$broadcast("elevation.plot.data",a)}}}])}(angular,OpenLayers,XMLSerializer),function(e){"use strict";e.module("explorer.version",[]).directive("marsVersionDisplay",["$http","versionService",function(e,t){return{templateUrl:"components/version/versionDisplay.html",link:function(n){e.get(t.url()).then(function(e){n.version=e.data.version})}}}]).provider("versionService",function(){var e="service/appConfig/version";this.url=function(t){e=t},this.$get=function(){return{url:function(){return e}}}})}(angular),function(e){"use strict";e.module("explorer.waiting",[]).factory("waiting",["$q",function(e){function t(){this.waiting=[],this.length=0,this.waiter=function(){var t=e.defer();return this.waiting.push(t),this.length++,t},this.resolve=function(e){this.waiting.forEach(function(t){t.resolve(e)}),this.waiting=[],this.length=0},this.reject=function(e){this.waiting.forEach(function(t){t.reject(e)}),this.waiting=[],this.length=0},this.notify=function(e){this.waiting.forEach(function(t){t.notify(e)})}}return{wait:function(){return new t}}}])}(angular),function(e,t){"use strict";e.module("mars.zoom",[]).directive("marsZoomExtent",["zoomService","flashService",function(e,t){return{restrict:"AE",scope:{item:"="},link:function(n,r,i){function o(){var r=n.item,i="zoomIn"==r?"":"zoomIn";"zoomIn"==r?e.deactivateBoundingBox():"zoomIn"==i&&(t.add("Drag diagonally to zoom to an area",4e3),e.activateBoundingBox().then(function(t){n.item="",e.zoomTo(t)})),n.item=i}r.on("click",o)}}}]).directive("marsZoomOutExtent",["zoomService",function(e){return{template:'<i class="fa fa-search-minus"></i>',link:function(t,n,r){n.on("click",function(){e.zoomOut()})}}}]).factory("zoomService",["mapService","$log","$q",function(e,n,r){var i,o,a={};return{activateBoundingBox:function(){return a.deferred=r.defer(),null===i?(o=new t.Layer.Vector("Prepare to define an area to zoom to"),i=new t.Control.DrawFeature(o,t.Handler.RegularPolygon,{handlerOptions:{sides:4,irregular:!0},featureAdded:function(){n.debug("Bounding box drawn"),e.getMap().then(function(){var e=o.features[0],t=e.geometry.clone().getBounds();i.deactivate(),o.destroyFeatures(),a.deferred.resolve(t)})}}),e.getMap().then(function(e){e.addLayer(o),e.addControl(i),i.activate()})):i.activate(),a.deferred.promise},zoomTo:function(e){o.map.zoomToExtent(e)},zoomOut:function(){e.getMap().then(function(e){var t,n=e.zoom;n<=e.getMinZoom()||(t=10>n?n-1:13>n?n-2:n-3,e.zoomTo(t))})},deactivateBoundingBox:function(){this.isActiveBoundingBox()&&i.deactivate(),o&&o.removeAllFeatures()},isActiveBoundingBox:function(){return null!==i&&i.active},destroyBoundingBox:function(){i&&e.getMap().then(function(e){e.removeControl(i),e.removeLayer(o),i.destroy(),i=o=null})}}}])}(angular,OpenLayers),angular.module("exp.ui.templates",[]).run(["$templateCache",function(e){e.put("components/confirm/confirm.html",'<div class="modal-header">\r\n   <h3 class="modal-title" style="font-weight:bolder">Confirm</h3>\r\n</div>\r\n<div class="modal-body" id="accept" style="width: 100%; margin-left: auto; margin-right: auto;">\r\n	<div>\r\n		{{message}}\r\n	</div>	\r\n	<div style="text-align: right;padding-top:10px">\r\n		<button type="button" class="btn btn-default" style="width:4em" ng-click="accept()" focus-me="true">OK</button>\r\n		<button type="button" class="btn btn-default" style="width:4em" ng-click="reject()">Cancel</button>\r\n	</div>\r\n</div>'),e.put("components/flasher/flash.html",'<div class="marsFlash" ng-show="messages.items.length > 0">\r\n  <div ng-repeat="message in messages.items">\r\n     <span><img alt="Waiting..." src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" ng-show="message.spinner" style="position:relative;top:2px;" width="12"></img> {{message.text}}</span>\r\n  </div>\r\n</div>'),e.put("components/footer/footer.html",'<!-- Footer -->\r\n<nav class="navbar navbar-inverse navbar-fixed-bottom ga-footer" role="navigation" mars-footer>\r\n    <div class="container-fluid">\r\n        <div class="navbar-header">\r\n            <button type="button" class="navbar-toggle" data-toggle="collapse"\r\n                    data-target="#bs-example-navbar-collapse-1">\r\n                <span class="sr-only">Toggle footer</span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n            </button>\r\n        </div>\r\n        <div class="navbar-nobrand">\r\n            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                <ul class="nav navbar-nav">\r\n                    <li><a href="http://creativecommons.org/licenses/by/3.0/au/deed.en"><img src="data:image/png;base64,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" height="20px" alt="CC BY 3.0 AU"></img></a></li>\r\n                    <li><a href="http://www.ga.gov.au/copyright">Copyright</a></li>\r\n                    <li><a href="http://www.ga.gov.au/disclaimer">Disclaimer</a></li>\r\n                    <li><a href="http://www.ga.gov.au/privacy">Privacy</a></li>\r\n                    <li><a href="http://www.ga.gov.au/accessibility">Accessibility</a></li>\r\n                    <li><a href="http://www.ga.gov.au/ips">Information Publication Scheme</a></li>\r\n                    <li><a href="http://www.ga.gov.au/ips/foi">Freedom of Information</a></li>\r\n                    <li class="contact"><a href="http://www.ga.gov.au/contact-us" target="_blank">Contact us</a> </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nav>'),e.put("components/graph/lineGraph.html",'<div class="lineGraphContainer" style="width:100%; position:relative"> \r\n	<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAKCAIAAADNfmwpAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAsSURBVEhL7dAxAQAwEAOh+jedWvjbQQJvnMkKZAWyAlmBrEBWICuQFcg62z7kl6zuJtr7XQAAAABJRU5ErkJggg==" style="width:100%;" class="aspect10x1"></img>\r\n	<div style="position: absolute;	top: 0px; left: 0px; height: 100%;width:100%" >\r\n		<svg class="lineGraphSvg" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1050 105" \r\n					ng-mouseenter="mouseEnter($event)" ng-mouseleave="mouseLeave($event)" ng-mousemove="mouseMove($event)" ng-click="mouseClick($event)">\r\n			<g>\r\n				<text y="16" x="57" style="fill-opacity:0.6; font-size:120%">{{config.heading}}</text>\r\n			</g>\r\n  			<g transform="translate(0, 2)">\r\n  				<g class="zeroLine" ng-show="showZeroLine && minY < 0">\r\n					<line x1="50" ng-attr-y1="{{90 * (1 + minY/rangeY)}}" x2="1050" ng-attr-y2="{{90 * (1 + minY/rangeY)}}" style="stroke:blue" stroke-width="1" stroke-opacity="0.6" />\r\n				</g>\r\n  				<g ng-repeat="points in data" class="context" style="cursor:pointer" transform="translate(50)" explorer-line>\r\n					<path ng-attr-fill="{{points.style.fill}}" class="area" ng-attr-d="{{path}}" ng-attr-fill-opacity="{{points.style.fillOpacity}}"></path>\r\n					<path ng-attr-d="{{line}}" ng-attr-stroke="{{points.style.stroke}}" ng-attr-stroke-width="{{points.style.strokeWidth}}" fill-opacity="0"></path> \r\n				</g>\r\n  				<g class="xAxis">\r\n					<line x1="50" y1="90" x2="1050" y2="90" style="stroke:black" />\r\n					<text transform="translate(1040 88)" y="4" dy=".71em" style="text-anchor:end">{{config.xLabel}}</text>\r\n				</g>\r\n				<g class="yAxis">\r\n					<line x1="50" y1="0" x2="50" y2="90" style="stroke:black" />\r\n					<text transform="rotate(-90) translate(-10)" y="6" dy=".71em" style="text-anchor:end">{{config.yLabel}}</text>\r\n					<g ng-repeat="tick in yTicks">\r\n						<text font-size="80%" style="text-anchor:end;" ng-attr-transform="translate(45 {{90 * (1 - (tick - minY)/ rangeY) +3}})">{{round(tick)}}</text>\r\n						<line x1="45" x2="50" ng-attr-y1="{{90 * (1 - (tick - minY)/ rangeY)}}" ng-attr-y2="{{90 * (1 - (tick - minY)/ rangeY)}}" style="stroke:black"></line>\r\n					</g>\r\n				</g>\r\n				<g visibility="visible" ng-show="position">\r\n					<line x1="{{50 + position.graphX}}" y1="-5" x2="{{50 + position.graphX}}" y2="95" style="stroke:black" />\r\n  				</g>\r\n  			</g>\r\n  			<g transform="translate(0 88)">\r\n				<text y="6" dy=".71em" transform="translate(50)">{{config.leftText}}</text>\r\n				<text y="6" dy=".71em" transform="translate(250)">{{config.middleText}}</text>\r\n  			</g>\r\n		</svg>\r\n	</div>\r\n</div>'),e.put("components/header/header.html",'<div class="container-full" style="padding-right:10px; padding-left:10px">\r\n    <div class="navbar-header">\r\n\r\n        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".ga-header-collapse">\r\n            <span class="sr-only">Toggle navigation</span>\r\n            <span class="icon-bar"></span>\r\n            <span class="icon-bar"></span>\r\n            <span class="icon-bar"></span>\r\n        </button>\r\n\r\n        <a href="http://www.ga.gov.au" class="hidden-xs"><img src="data:image/png;base64,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" alt="Australian Government - Geoscience Australia" class="logo"></img></a>\r\n        <a href="http://www.ga.gov.au" class="visible-xs"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAABFCAYAAACi23N0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAQnAAAEJwHZTx2AAAAAB3RJTUUH3gYLFhAE6aWs1AAAC8BJREFUeNrtnF2MJFUVx393WWTBXaBWYSAgYq+4fq0IjYoa4j70oAaixtgLSog+9WBcXu2RTTA+GLtfCCZKmA4mRgMJ02gwcQ1mSo1KIoZtBEFXkW3WD+RD3QIhRIjs9aH+Z/tM2z09+8FOT0/dpNIzVbeqbt1zz/+e8z/nXihKUYpSlKIUZTxLGHYhxrg6PyiEOtCKMWartP2TL6gQwgJQBrpAGmOcnRRBrZsYaAihBCQ6ypMGfetXoUCqThBpjDF1l9u61gHSEEKyWiFw1QtKQpiT5mRAKqjuhhBS4BKg2idAE3INKK1KSFyNc5TmoooENR1j7IQQGrpsGlUC2jHGtu6pAA1dnx4kyMKYOPYfc0Aa1ZGF1zoM2JwHtsQYu4WgXn2jYZ/+XXaHhxASYI++bctqs/rWj1EDK0BnGZN/3f19XQjhPOAtwKPAncDzQ+6rCA6by9U+g81ijlo82j8B/HWpuSOEUDatUHkaeAA4BdgA7AfOAp4CNqrOC8Abga2Cy0tijJ1lOs4RuOt4wuS4+1HnSyu2C9qGCWmh7/R+4CbgPmnSfuCPwA3AL4BHgD8BL0lIyPBIQggVHYkNFnu3fjcBU9LEFS/j5PBulHHQGKJx89bZfYIqyZIzh/efwGnAxYLJC6Rh9qw9wAEJfQHYJ4txO1CTkBrA94BzlmuoTLwfpY65HHjF2mOjPMaY6e8FCcKXTHD5GucAbwXuAd4sjUj163G8n7VIJNCHgK/rPfuB65zRUmiU8P98dWamTroeuEZVGkMooWngQcFeS0K5D/iINPPngq0HNE+NMlIuBD4D/Eta+RBwTgihZANnTQtKGvWc4Ooy4H7B4HPqoNqA27oyCPYDZzoNOwu4V1rxegnzJF3fsQxhVYD3AFtkRf4AmB2gzWsP+qRRsyGEi4DXAVfo0smalwaVtoT4lKDvQgnhYIzxu7LYXgKqwIvAxhhjGkL4JLBLGjpMS24EtuneJMZYK6CvZ20lMcbfyDQ/BdgrTbplxOg/SyO/oo7dLMMgAc7WubMFZQgWd8QYN0uwTVmGAH+Whbg3xpjFGFsxxiZjUlbcjzKLLsY4rf9rZmnJCV4YcNsO4FwJdbO0ZitwELiKPB71MxkobwJ+D9wNvBd4XL7Y76SxpwNnxBg/OACSo3jB1nEcuOMnqBDCTnX0CcBPgS9oEt+kzq45Q6ItDXkC+CXwFxkaX5YPdaLqpe7eDcDLwGPSlrcB7wIulRDvl6Au1/MzGSL2zpLa82v1SbpSglpp6Nut+eAV4O3A36QdLZnefvKfcffcAZwns/orwG+BizQvlSSkAzI0bpXgPgz8F/iSfr8P/AO4Te+7T/9voBdC+aaEdgXQCSGUhznkEwd9grOqOqIlQ+DTYhKiYOpqdbixAi0deySwTJ3ZdtzfBh0HNQBP07yT6TlGA00Bt7vwx6EYldqW6DmXSWNvBP4tTU6AssH0REOfQg3WYefKh0ImeskdVjoys41C6upc4szyTOcTGQcXqGMbujdzMFqKMW5xkeIa0DTDQcZIyyxS1ZsShKZAPcY4sybmKJnPiRPSUmW/fi8FTnXnHxU/CPCMtAf5PWVprYXmPya4exL4j8z6DbIa/TtGlZKE2lkTgjpCp/iLckQ70h7TvK7rRIPDkoO8jqOO2s7gKAPvBG4ep7yKsTQmPGNt84WOUghhZwjh4wq7m9PZVr5DV4LwrEFJAmhIQEmfMdJx1mNFgtoGnB5CmLdQ/rhQRmMjqBDCteSM9U2ypurOSKgC7yZPVOlKAI87fyZxx6EEF/3f7RNS213DObOzgs8Z3bMuhHCrjBMLg1Q1mKpr1uENIeySZXavRvY2zRl3SDu2AQ9rYi/JCnvCCcIgLNH1jtj2BXGBM9LWmuqVdD5Vx5dkIDysZ80DP5ajnApquzL79wInxRh3rRT0rSTXd4usuIMSxgnAberInfKDnpXllQFXkrPqmbQkMXJWH1fW7yPAkyGEkvGIjgFZCCHsBj7goPDbEnDbaWdJxPCJElzVnrPmSFlN4Je4kXSK67wfaQ6ZCiHcRR6meFYj/AXB4oNANYRwvSD8ZdW5WCzEh0IIN4q1OEAejr8deJ+eXZYFZxDZBTIJt2uZtzHGVgih44yWtcn1DbHwaqJtNgI/ZDHbnYnJuNrBoOVJpOTJmamb78xknxPT8A49u6x6VdU7U4J+eiXJ2FWTex5j7GqiPwN4v5iLbepY6/wbnIGwzjm914i/O1Wa9KLYjs+p/keBC+UHGTS+DPwK+DvwB2eYFFbfMksq6uZ5YErCq4lUfUZMRibB7HbGwTpylnyTuL+fiFk4oGtTMsUN8u4G3qCB0X41ndmJgr4hcOBDH6VB6VshhH3OnzJ+MFsqz9wlzTTJQ/DPrXQG7USujxKJWnIEbuKgq6o5bHZYeELzYbYamInVuJrDd7Kx4k1HJ1Xc/DULlORbdfq1a1zzzydOo/ogrO5CFWZuV8YlL29NQ98klolfGjrppRBUIaiiHHdBhRDmjsQqW04iiMIIc7LMCCEsuGWeh/vOssWW9Mz5I2n7CroaRy4o496UBHI4Vtg8y0gFlg+TObM6pUfOHpaQyJNfujHGWeU1NBmDdORltL3BiOU9y/GjaurIOtBShzTohRoq8lf6BVkmZ7dfC+xU51eBbwBvpRf42zHAN+qEEHxeX6Z6c33sw7RzVi0bqe0GQSeE4JNW7L7b1aaMPHBYJ49FfZ5eON+c5o7adDPwWd1jYf3mgDZZZlRL7oK917KuGu4ZNijr5NstVDhcrlHmeaKGzJGTmxWdj/RC3hG41p2ruvO+voXUv2rX3G8jf2WE3rqlBvmyF19vQVqz6Pm6b489o/9Qp9gz5nXYN/lvtNX2B9w75tWRifvG/vb6NtXtuntvom+pDXlGBBpLuUSjoK8+4n8rT7qRNKxORyHwXRqJjREDZZbFeXtWhtE9mYNAFEqP4gCvcvW6GkwWymjQ2+7ANLpFTupCTtQ2R9BMg3IzTCOt39ocRUxr3Yh5JokxzgjvU6Bi/FifuuOgwK9lSvoTRZQbUVdnjMLtqoeyEcWeV5GgUyeYO/sguSP6qE2+eUiLXgil2Qc/R8MDdtwzmqOetVRSzfoR2pS5mztuzvoOvVwEy1uoq1NaqmvY/ljfh3fppXt1yUPsJwujt7s6L7nBYKF4nxqW+oESY2yHEKaBhhtMtnmVzVU1tXXGCdeeaYNsn/sGSytLpan+O1ItFTJjqOTqe6PI0KMMfG3AM8p6ny1v7RQUUkEhFaVgJopSCGpVQeIS1xpF9xz3kg5zeAtjojAmilLMUWuwrD8GqlpyTmlXsJkd5TPL5Cz4Mc0O8lv3vAqQZdm8h1ZDHsvkmXVH2bgGvU07zKs/Fjsk76HHkx3LUmU4F7nUNy6n2NLVst4xNxYapfhUHbf/nUIT/nrXODf9n4nqsa1zbPVERi8Pr0tO8Vg9f940t0xOlmYayVXysELXcv2GZB/Z2qem7rV9aSHnNVOXK2gUWF2bChsX2OX/89Y9FbXJfROufUeVhXvEVp9twBtjDEuMQmOiTcsy92vLNm2VYFu/W6SZ0/RY5zp5PGoPPW7ReMUGPd7POq+jjp9xbaq60T6jVRrzrqPnY4xB+9U26cXLamqLBUMtDmd7UlSdWb3g2o1re5M8jLF5Jay+zGO/wt8WRq+xmGCsufp1J6iyRqCN0Ok+XLc6fpOOjhvdphFNHVUWr0Tshz0b6daR3f5vcddt+akx8Vanpe0LbCH3UstI2/SWoiYrNUfZPg1VTc4GFeawZRrRnQEdYfBWprdGqiLo6f+gLMa4g+Hhea+tmdOkthtIfp+JFnn2rA99+3c26cWsBiFN6gZfl6VjTBUJ/ahXiByxoLShxix5WKHhoMxW+dUELej/Cr2wvWlKF/iWQZgSUbY7DWhqjpgn36nFOtUszXskHDNimpqDDm3E6Ha0TPo0o0G+U4zNIQaPFkg0WM58ToPiaV5LDR2u1LlPufZNOYGNTGApSlGKUpSiLCr/A3xbGmfnPpNCAAAAAElFTkSuQmCC" alt="Australian Government - Geoscience Australia" class="logo-stacked"></img></a>\r\n        <a href="#/" class="appTitle visible-xs"><h1 style="font-size:120%">{{heading}}</h1></a>\r\n    </div>\r\n    <div class="navbar-collapse collapse ga-header-collapse">\r\n        <ul class="nav navbar-nav">\r\n            <li class="hidden-xs"><a href="#/"><h1 class="applicationTitle">{{heading}}</h1></a></li>\r\n        </ul>\r\n        <ul class="nav navbar-nav navbar-right">				\r\n        	<li mars-user-details ng-show="username" role="menuitem" style="padding-right:10px"></li>\r\n			<li mars-version-display role="menuitem"></li>\r\n			<li style="width:10px"></li>\r\n        </ul>\r\n        <div class="breadcrumbsContainer hidden-xs">\r\n            <ul class="breadcrumbs">\r\n                <li class="first"><a href="/">Home</a></li>\r\n            </ul>\r\n        </div>\r\n    </div><!--/.nav-collapse -->\r\n</div>\r\n\r\n<!-- Strap -->\r\n<div class="row">\r\n    <div class="col-md-12">\r\n        <div class="strap-blue">\r\n        </div>\r\n        <div class="strap-white">\r\n        </div>\r\n        <div class="strap-red">\r\n        </div>\r\n    </div>\r\n</div>\r\n'),
e.put("components/info/info.html",'<div class="marsinfo" ng-show="isOpen">\r\n	<div class="marsinfo-inner">\r\n      <h3 ng-show="title" ng-bind="title" class="marsinfo-title"></h3>\r\n      <div class="marsinfo-content" ng-transclude></div>\r\n	</div>\r\n</div>'),e.put("components/knob/knob.html",'<input class="preset1" type="range" tabindex="-1" style="position: absolute; top: -10000px;" knob-handler>\r\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg"  width="100%" height="100%" class="knob" viewbox="0 0 200 200" ng-attr-style="{{checkDisabled()}}">\r\n	<defs>\r\n   		<filter id="{{knobShadow}}" height="150%" width="150%">\r\n       		<feGaussianBlur in="SourceAlpha" stdDeviation="2"/>\r\n   	    	<feOffset dx="0" dy="3" result="offsetblur"/>\r\n        	<feMerge>\r\n	   	        <feMergeNode/>\r\n    	   	    <feMergeNode in="SourceGraphic"/>\r\n	       	</feMerge>\r\n	   	</filter>\r\n	</defs>\r\n	<circle cx="100" cy="100" r="60.606061" ng-attr-style="filter:url(#{{knobShadow}});fill:{{config.circleColor}}"></circle>\r\n	<rect x="97" y="39.4" width="6" height="40" class=" pointer" ng-attr-transform="rotate({{angle}} 100 100)" ng-attr-fill={{config.pointerColor}}></rect>\r\n	<g class=" scale">\r\n		<text ng-repeat="tick in ticks" x="95" y="23.8" width="10" height="10" \r\n				ng-attr-transform="rotate({{config.startAngle + $index * config.degrees + 3}} 100 100)" style="text-anchor:middle">{{tick}}</text>\r\n	</g>\r\n	<g>\r\n		<text y="175" dy=".71em" x="100" style="text-anchor:middle; font-weight:bold">{{config.label}}</text>\r\n	</g>\r\n</svg>'),e.put("components/legend/legend.html",'<div>    \r\n    <div class="modal-header" drag-parent parentClass="legendContainer">\r\n        <h4 class="modal-title">{{heading}}</h4>\r\n    </div>\r\n	<div class="legendImageContainer" style="max-height:450px;overflow-y:auto; overflow-x:hidden;padding-bottom:5px"> \r\n		<img ng-src="{{legend}}"></img>\r\n	</div>\r\n</div>\r\n'),e.put("components/message/messages.html",'\r\n<span ng-controller="MessageController" style="z-index:3">\r\n  <span ng-show="historic.length > 10000">\r\n    <a href="javascript:;" title="Show recent messages"><i class="fa fa-comments-o" style="color:black"></i></a>\r\n  </span>\r\n  <div ng-show="message" class="alert" role="alert" \r\n  		ng-class=\'{"alert-success":(message.type=="success"),"alert-info":(message.type=="info"),"alert-warning":(message.type=="warn"),"alert-danger":(message.type=="error")}\'>\r\n    {{message.text}} <a href="javascript:;" ng-click="removeMessage()"><i class="fa fa-times-circle" style="font-size:120%"></i></a>\r\n  </div>\r\n</div>'),e.put("components/modal/modal.html",'<div class="exp-modal-outer">\r\n	<div class="exp-backdrop fade  in" ng-show="isModal && isOpen" \r\n		ng-class="{in: animate}"></div>\r\n	<div class="exp-modal" ng-show="isOpen" exp-modal-up>\r\n		<div class="exp-modal-inner">\r\n    	  <div drag-parent parentClass="exp-modal-outer" class="exp-modal-title" ng-show="title">\r\n      		<i class="fa" ng-class="iconClass"></i> \r\n      		<span ng-bind="title"></span>\r\n      		<button title="Close popup dialog" ng-click="isOpen=false" class="exp-modal-close" type="button"><i class="fa fa-close"></i></button> \r\n	      </div>      \r\n    	  <div class="exp-modal-content" style="{{containerStyle}}" ng-class="{\'exp-modal-no-title\':!title}" ng-transclude></div>\r\n		</div>\r\n	</div>\r\n</div>'),e.put("components/popover/popover.html",'<div class="popover {{direction}}" ng-class="containerClass" ng-show="show">\r\n  <div class="arrow"></div>\r\n  <div class="popover-inner" ng-transclude></div>\r\n</div>'),e.put("components/user/userdetails.html",'<span class="badge" title="Your are logged in">Logon: {{username}}</span>'),e.put("components/usermaps/add-maps.html",'<div>\r\n	<div class="marsMapsTreeview">\r\n		\r\n		<p style="text-align: left; margin: 10px; font-size: 16px; padding: 40px 5px 0px 0px;">\r\n			<strong>Your Maps:</strong>\r\n		</p>\r\n		\r\n		<div add-maps></div>\r\n	</div>\r\n	<layer-inspector active="active"></layer-inspector>\r\n</div>'),e.put("components/usermaps/addmaps.html",'<div ng-form>\r\n	<div ng-repeat="map in maps | orderBy : \'name\'" style="padding:7px;padding-left:10px;position:relative;height:1.4em" ng-class-even="\'even\'" ng-class-odd="\'active\'">\r\n		<div style="float:left">\r\n			<a href="javascript:;" class="featureLink" ng-click="makeActive()" ng-class="{active:(map == active)}" >\r\n				{{map.name}} \r\n			</a>\r\n		</div>\r\n		<div style="float:right">\r\n			<a class="featureLink" href="javascript:;" title="Show legend for this map" ng-show="map.legendUrl" heading="map.name + \' Legend\'"\r\n				explorer-legend legend="map.legendUrl"><i class="fa fa-list-ul"></i></a>\r\n			<a class="featureLink" href="javascript:;" title="Edit the map" \r\n				ng-click="editMap()"><i class="fa fa-pencil"></i></a>	\r\n			<a class="featureLink" href="javascript:;" title="Show on map" \r\n				ng-click="toggleShow()"><i class="fa" ng-class="{\'fa-eye\':(!map.layer.visibility), \'fa-eye-slash\':map.layer.visibility}"></i></a>	\r\n			<a href="javascript:" exp-confirm="\'Are you sure that you want to delete this map?\'" success="removeMap()" title="Remove map from application. Cannot be undone.">\r\n				<i class="fa fa-remove" title="Remove this feature from your added maps."></i>\r\n			</a>						\r\n		</div>\r\n	</div>\r\n	<vectors-display vectors="vectors"></vectors-display>\r\n	\r\n	<accordion>\r\n		<accordion-group heading="{{status.edit && \'Edit\' || \'Add\'}} a map..." is-open="status.mapOpen">\r\n			<div class="addMapsDialog">\r\n				<div>\r\n					<label for="addMapsName">Name</label>\r\n					<input type="text" ng-model="work.name" id="addMapsName" required="required"/>\r\n				</div>\r\n				<div>\r\n					<label for="addMapsDescription">Description</label>\r\n					<input type="text" ng-model="work.description" id="addMapsDescription"/>\r\n				</div>\r\n				<div>\r\n					<label for="addMapsUrl">WMS URL</label>\r\n					<input type="text" ng-model="work.url" id="addMapsUrl" required="required"/>\r\n				</div>\r\n				<div>\r\n					<label for="addMapsLayers">Layers</label>\r\n					<div ng-repeat="layer in work.layers | reverse" ng-class-even="\'even\'" ng-class-odd="\'active\'">\r\n						<div style="padding:2px">\r\n							{{layer}}\r\n							<div style="float:right">\r\n								<a class="featureLink" href="javascript:;" title="Move layer higher on map" ng-disabled="$first"\r\n									ng-click="shuffleDown()"><i class="fa fa-arrow-up"></i></a>	\r\n								<a class="featureLink" href="javascript:;" title="Move layer lower on map" ng-disabled="$last"\r\n									ng-click="shuffleUp()"><i class="fa fa-arrow-down"></i></a>	\r\n								<a href="javascript:" exp-confirm="\'Are you sure that you want to delete this map?\'" success="removeLayer()" title="Remove map from application.">\r\n									<i class="fa fa-remove" title="Remove this layer from your added maps."></i>\r\n								</a>						\r\n							</div>\r\n						</div>\r\n					</div>\r\n					<input ng-model="workLayer" ng-required="work.layers.length == 0" \r\n							exp-enter="addLayer()" title="Hit enter after entering each layer to add the layer"/>\r\n					<button ng-click="addLayer()" title="You can also use the enter key to add layer from the previous input">Add</button>\r\n				</div>\r\n				<div>\r\n					<label for="addMapsThumbnailUrl">Thumbnail URL</label>\r\n					<input type="text" ng-model="work.thumbnailUrl"/>\r\n				</div>\r\n				<div>\r\n					<label for="addMapsLegendUrl">Legend URL</label>\r\n					<input type="text" ng-model="work.legendUrl"/>\r\n				</div>\r\n			</div>\r\n	\r\n			<div class="addMapButtons">\r\n				<div  class="buttons" style="float:right">\r\n					<button type="button" class="btn btn-default" ng-click="clear()" title="Abandon updates">Cancel</button>\r\n					<button type="button" class="btn btn-default" ng-click="addMap($event)" ng-disabled="!isComplete()" \r\n								title="Click to complete updates">{{status.edit && \'Update\' || \'Add\'}}</button>\r\n				</div>\r\n			</div>\r\n		</accordion-group>\r\n		<accordion-group heading="{{status.vectorEdit && \'Edit\' || \'Add\'}} a vector..." is-open="status.vectorOpen">\r\n			<div mars-vector-edit vectors="vectors">\r\n		</accordion-group>\r\n	</accordion>\r\n</div>'),e.put("components/usermaps/vectorDisplay.html",'<div ng-repeat="vector in vectors | orderBy : \'name\'" style="padding:7px;padding-left:10px;position:relative;min-height:1.4em" ng-class-even="\'even\'" ng-class-odd="\'active\'">\r\n	<div ng-show="vector.layer.features.length < 2" style="clear:both">\r\n		<div style="float:left">\r\n			<a href="javascript:;" class="featureLink" ng-click="makeActive()" ng-class="{active:(vector == active)}" >\r\n				{{vector.name}} \r\n			</a>\r\n		</div>\r\n		<div style="float:right">\r\n			<a class="featureLink" href="javascript:;" title="Plot feature\'s elevation" ng-show="isPath()" \r\n				ng-click="showElevation()"><i class="fa fa-align-left fa-rotate-270"></i></a>\r\n			<a class="featureLink" href="javascript:;" title="Edit the vector layer" \r\n				ng-click="vectorEdit()"><i class="fa fa-pencil"></i></a>\r\n			<a class="featureLink" href="javascript:;" title="Show on map" \r\n				ng-click="toggle()"><i class="fa" ng-class="{\'fa-eye\':(!vector.show), \'fa-eye-slash\':vector.show}"></i></a>\r\n			<a class="featureLink" href="javascript:;" title="Pan map to feature" \r\n				ng-click="panToVector()"><i class="fa fa-flag"></i></a>	\r\n			<a href="javascript:"  title="Remove vector layer. Cannot be undone."\r\n				exp-confirm="\'Are you sure that you want to delete this map?\'" success="remove()"><i class="fa fa-remove"></i></a>						\r\n		</div>\r\n	</div>\r\n	\r\n	<div ng-show="vector.layer.features.length > 1" style="clear:both">\r\n		<div style="float:left">\r\n			<i class="fa fa-caret-right" ng-class="{\'fa-caret-down\':expanded,\'fa-caret-right\':(!expanded)}" role="presentation" ng-click="expanded = !expanded"></i> <strong>{{vector.name}}</strong>\r\n		</div>\r\n	\r\n		<div style="float:right">\r\n			<a class="featureLink" href="javascript:;" title="Edit the vector layer" \r\n				ng-click="vectorEdit()"><i class="fa fa-pencil"></i></a>\r\n			<a class="featureLink" href="javascript:;" title="Show on map" \r\n				ng-click="toggle()"><i class="fa" ng-class="{\'fa-eye\':(!vector.show), \'fa-eye-slash\':vector.show}"></i></a>\r\n			<a class="featureLink" href="javascript:;" title="Pan map to feature" \r\n				ng-click="panToVector()"><i class="fa fa-flag"></i></a>	\r\n			<a href="javascript:"  title="Remove vector layer. Cannot be undone."\r\n				exp-confirm="\'Are you sure that you want to delete this map?\'" success="remove()"><i class="fa fa-remove"></i></a>						\r\n		</div>\r\n		\r\n		<div style="clear:both" ng-show="expanded">\r\n			<div ng-repeat="feature in vector.layer.features">\r\n				<div style="float:left; padding-left:10px">\r\n					{{feature.fid ? feature.fid : feature.data.name ? feature.data.name : \'Feature #\' + $index}} \r\n				</div>\r\n				<div style="float:right">\r\n					<a class="featureLink" href="javascript:;" title="Plot feature\'s elevation" ng-show="isFeaturePath()" \r\n						ng-click="showFeatureElevation()"><i class="fa fa-align-left fa-rotate-270"></i></a>\r\n					<a class="featureLink" href="javascript:;" title="Pan map to feature" \r\n						ng-click="panToFeature()"><i class="fa fa-flag"></i></a>			\r\n				</div>\r\n				<div style="clear:both"></div>\r\n			</div>\r\n		</div>\r\n		\r\n	</div>\r\n</div>'),e.put("components/usermaps/vectorEdit.html",'<div class="addMapsDialog" ng-if="!status.vectorEdit">\r\n	<form method="POST" action="service/upload/file" enctype="multipart/form-data" ajax-form update="cancelVectorEdit()" cancel="cancelVectorEdit()">\r\n		<div>\r\n			<label for="addVectorName">Name</label>\r\n			<input type="text" ng-model="vector.name" id="addVectorName" name="vectorName" required="required"/>\r\n			<input type="hidden" name="clientSessionId" value="{{localClientSessionId}}" />\r\n		</div>\r\n		<div>\r\n			<label for="addVectorDescription">Description</label>\r\n			<input type="text" ng-model="vector.description" id="addVectorDescription" name="vectorDescription"/>\r\n		</div>\r\n		<div>\r\n			<label for="addVectorFile">Select file to upload</label>\r\n			<input type="file" name="vectorFile"/>\r\n		</div>\r\n	\r\n		<div class="addMapButtons">\r\n			<div  class="buttons" style="float:right">\r\n				<button type="reset" class="btn btn-default" title="Cancel adding vector file">Cancel</button>\r\n				<button type="submit" class="btn btn-default" title="Add  vector file" value="Add Vector File">Add</button>\r\n			</div>\r\n		</div>\r\n	</form>\r\n</div>\r\n<div class="addMapsDialog" ng-if="status.vectorEdit">\r\n	<div>\r\n		<label for="addVectorName">Name</label>\r\n		<input type="text" ng-model="editVector.name" id="addVectorName" required="required"/>\r\n	</div>\r\n	<div>\r\n		<label for="addVectorDescription">Description</label>\r\n		<input type="text" ng-model="editVector.description" id="addVectorDescription"/>\r\n	</div>	\r\n	<div class="addMapButtons">\r\n		<div  class="buttons" style="float:right">\r\n			<button type="button" class="btn btn-default" ng-click="cancelVectorEdit()" title="Cancel adding vector file">Cancel</button>\r\n			<button type="button" class="btn btn-default" ng-click="saveVectors()" title="Save updates for future sessions">Save</button>\r\n		</div>\r\n	</div>\r\n</div>\r\n'),e.put("components/version/versionDisplay.html",'<span class="badge">Version: {{version}}</span>\r\n')}]);